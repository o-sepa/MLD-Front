import{a as be,b as V,c as he,d as ve,e as ge,f as xe,g as Ce,h as Se,i as O,j as _e}from"./chunk-E335FOEK.js";import{$ as se,A as S,B as l,E as u,I as v,K as x,M as b,N as L,O as q,P as o,Q as a,R as s,S as F,T as g,U as f,V as r,W as h,X as R,Z as ie,_ as le,a as D,b as P,c as oe,ca as de,da as te,ea as me,f as W,g as $,ga as ce,i as X,ia as pe,k as ae,ma as ue,n as m,na as fe,o as Z,oa as k,pa as I,q as T,r as j,ra as ye,s as C,sa as we,t as M,v as ee,x as re,y as U}from"./chunk-IOLBJRDP.js";var H=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-toggle-theme"]],decls:7,vars:0,consts:[[1,"flex","cursor-pointer","gap-2"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","5"],["d","M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4"],["type","checkbox","value","synthwave",1,"toggle","theme-controller"],["d","M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"]],template:function(e,i){e&1&&(o(0,"label",0),C(),o(1,"svg",1),s(2,"circle",2)(3,"path",3),a(),M(),s(4,"input",4),C(),o(5,"svg",1),s(6,"path",5),a()())},encapsulation:2})};var z=class n{authService=m(we);router=m(k);logout(){this.authService.logout(),this.router.navigateByUrl("/auth")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-navbar"]],decls:17,vars:0,consts:[[1,"navbar","bg-base-100","shadow-sm"],[1,"navbar-start"],[1,"dropdown"],["tabindex","0","role","button",1,"btn","btn-ghost","lg:hidden"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h8m-8 6h16"],["tabindex","0",1,"menu","menu-sm","dropdown-content","bg-base-100","rounded-box","z-1","mt-3","w-52","p-2","shadow"],["routerLink","/",1,"btn","btn-ghost","text-xl","font-teslo"],[1,"text-secondary"],[1,"navbar-center","hidden","lg:flex"],[1,"menu","menu-horizontal","px-1"],[1,"navbar-end","gap-4"],[1,"btn","btn-sm","btn-outline","btn-secondary",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),C(),o(4,"svg",4),s(5,"path",5),a()(),M(),s(6,"ul",6),a(),o(7,"a",7),r(8,"MeLoDebes "),o(9,"span",8),r(10,"| MLD"),a()()(),o(11,"div",9),s(12,"ul",10),a(),o(13,"div",11),s(14,"app-toggle-theme"),o(15,"button",12),g("click",function(){return i.logout()}),r(16,"Cerrar sesi\xF3n"),a()()())},dependencies:[I,H],encapsulation:2})};var B=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-home-layout"]],decls:3,vars:0,consts:[[1,"p-2.5","w-full"]],template:function(e,i){e&1&&(s(0,"app-navbar"),o(1,"section",0),s(2,"router-outlet"),a())},dependencies:[z,fe],encapsulation:2})};function ne(n,t){let e=!t?.manualCleanup;e&&!t?.injector&&Z(ne);let i=e?t?.injector?.get(ee)??m(ee):null,c=Ee(t?.equal),d;t?.requireSync?d=S({kind:0},{equal:c}):d=S({kind:1,value:t?.initialValue},{equal:c});let N,E=n.subscribe({next:p=>d.set({kind:1,value:p}),error:p=>{if(t?.rejectErrors)throw p;d.set({kind:2,error:p})},complete:()=>{N?.()}});if(t?.requireSync&&d().kind===0)throw new X(601,!1);return N=i?.onDestroy(E.unsubscribe.bind(E)),de(()=>{let p=d();switch(p.kind){case 1:return p.value;case 2:throw p.error;case 0:throw new X(601,!1)}},{equal:t?.equal})}function Ee(n=Object.is){return(t,e)=>t.kind===1&&e.kind===1&&n(t.value,e.value)}function J(n){return n?.injector||Z(J),me(P(D({},n),{loader:void 0,stream:t=>{let e,i=()=>e.unsubscribe();t.abortSignal.addEventListener("abort",i);let c=S({value:void 0}),d,N=new Promise(p=>d=p);function E(p){c.set(p),d?.(c),d=void 0}return e=n.loader(t).subscribe({next:p=>E({value:p}),error:p=>{E({error:p}),t.abortSignal.removeEventListener("abort",i)},complete:()=>{d&&E({error:new Error("Resource completed before producing a value")}),t.abortSignal.removeEventListener("abort",i)}}),N}}))}var De=(n,t)=>t.value;function Te(n,t){if(n&1){let e=F();o(0,"li")(1,"a",4),g("click",function(){let c=T(e).$implicit,d=f();return j(d.seleccionar(c))}),r(2),a()()}if(n&2){let e=t.$implicit;l(2),h(e.label)}}var A=class n{opciones=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}];selectedMonth=S(null);open=!1;seleccionar(t){this.selectedMonth.set(t),this.open=!1}onToggle(t){this.open=t.target.open}getNombreMes(){return this.selectedMonth()?this.selectedMonth()?.label:"Filtrar por mes"}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-botonera-dashboard"]],decls:9,vars:2,consts:[[1,"dropdown",3,"toggle","open"],[1,"btn","m-1"],[1,"menu","dropdown-content","bg-base-100","rounded-box","z-1","w-52","p-2","shadow-sm"],["routerLink","/home/new-new-new-new",1,"btn","btn-secondary"],[3,"click"]],template:function(e,i){e&1&&(o(0,"div")(1,"details",0),g("toggle",function(d){return i.onToggle(d)}),o(2,"summary",1),r(3),a(),o(4,"ul",2),L(5,Te,3,1,"li",null,De),a()(),o(7,"button",3),r(8,"Nuevo"),a()()),e&2&&(l(),x("open",i.open),l(2),h(i.getNombreMes()),l(2),q(i.opciones))},dependencies:[I],encapsulation:2})};var je=n=>["/home",n],Me=(n,t)=>t.id;function Fe(n,t){if(n&1){let e=F();o(0,"tr")(1,"th"),r(2),le(3,"date"),a(),o(4,"td"),r(5),a(),o(6,"td"),r(7),a(),o(8,"td"),r(9),a(),o(10,"td"),r(11),a(),o(12,"td"),r(13),a(),o(14,"td"),r(15),a(),o(16,"td"),r(17),a(),o(18,"button",2),C(),o(19,"svg",3),s(20,"path",4),a()(),M(),o(21,"button",5),g("click",function(){let c=T(e).$implicit,d=f();return j(d.onDelete.emit(c.id))}),C(),o(22,"svg",3),s(23,"path",6),a()()()}if(n&2){let e=t.$implicit;l(2),h(se(3,9,e.fecha,"dd/MM/yyyy")),l(3),h(e.horaTeoricaEntrada),l(2),h(e.horaRealEntrada),l(2),h(e.tiempoDesfaseEntrada||"00:00"),l(2),h(e.horaTeoricaSalida),l(2),h(e.horaRealSalida),l(2),h(e.tiempoDesfaseSalida||"00:00"),l(2),h(e.tiempoDesfaseTotal||"00:00"),l(),x("routerLink",ie(12,je,e.id))}}var G=class n{jornadas=U.required();onDelete=re();static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-data-table"]],inputs:{jornadas:[1,"jornadas"]},outputs:{onDelete:"onDelete"},decls:25,vars:0,consts:[[1,"flex","w-full"],[1,"table","w-full"],[1,"btn","btn-secondary","btn-circle","mr-3","mt-0.5",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","currentColor","d","M3 21v-4.25L16.2 3.575q.3-.275.663-.425t.762-.15t.775.15t.65.45L20.425 5q.3.275.438.65T21 6.4q0 .4-.137.763t-.438.662L7.25 21zM17.6 7.8L19 6.4L17.6 5l-1.4 1.4z"],[1,"btn","btn-circle","mt-0.5",3,"click"],["fill","currentColor","d","M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zM17 6H7v13h10zM9 17h2V8H9zm4 0h2V8h-2zM7 6v13z"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th"),r(5,"Fecha"),a(),o(6,"th"),r(7,"Hora entrada"),a(),o(8,"th"),r(9,"Hora entrada (real)"),a(),o(10,"th"),r(11,"Extra (entrada)"),a(),o(12,"th"),r(13,"Hora salida"),a(),o(14,"th"),r(15,"Hora salida (real)"),a(),o(16,"th"),r(17,"Extra (salida)"),a(),o(18,"th"),r(19,"Extra (total)"),a(),s(20,"th")(21,"th"),a()(),o(22,"tbody"),L(23,Fe,24,14,"tr",null,Me),a()()()),e&2&&(l(23),q(i.jornadas()))},dependencies:[ce,I],encapsulation:2})};var w=class n{http=m(pe);baseUrl=ye.baseUrl;controller="jornadas";getAll(){return this.http.get(`${this.baseUrl}/${this.controller}`)}getAllByMes(t){return this.http.get(`${this.baseUrl}/${this.controller}/mes/${t}`)}getPorId(t){return this.http.get(`${this.baseUrl}/${this.controller}/${t}`).pipe($(e=>P(D({},e),{fecha:new Date(e.fecha)})))}insertar(t){return this.http.post(`${this.baseUrl}/${this.controller}`,t)}actualizar(t){return this.http.put(`${this.baseUrl}/${this.controller}`,t)}borrar(t){return this.http.delete(`${this.baseUrl}/${this.controller}/${t}`)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"})};function Re(n,t){if(n&1){let e=F();o(0,"app-data-table",1),g("onDelete",function(c){T(e);let d=f();return j(d.onDelete(c))}),a()}if(n&2){let e=f();x("jornadas",e.jornadasResource.value())}}function ke(n,t){n&1&&(o(0,"p"),r(1,"No hay datos"),a())}var Y=class n{jornadasService=m(w);jornadasResource=J({request:()=>({}),loader:({request:t})=>this.jornadasService.getAll()});onDelete(t){this.jornadasService.borrar(t).subscribe({next:()=>location.reload()})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-dashboard-page"]],decls:3,vars:1,consts:[[3,"jornadas"],[3,"onDelete","jornadas"]],template:function(e,i){e&1&&(s(0,"app-botonera-dashboard"),v(1,Re,1,1,"app-data-table",0)(2,ke,2,0,"p")),e&2&&(l(),b(i.jornadasResource.hasValue()?1:2))},dependencies:[G,A],encapsulation:2})};function Ie(n,t){if(n&1&&(o(0,"span",6),r(1),a()),n&2){let e=f();l(),R(" ",e.formValidationUtils.getFieldError(e.form,"fecha")," ")}}function Ve(n,t){if(n&1&&(o(0,"span",6),r(1),a()),n&2){let e=f();l(),R(" ",e.formValidationUtils.getFieldError(e.form,"horaTeoricaEntrada")," ")}}function Je(n,t){if(n&1&&(o(0,"span",6),r(1),a()),n&2){let e=f();l(),R(" ",e.formValidationUtils.getFieldError(e.form,"horaTeoricaSalida")," ")}}function Ne(n,t){if(n&1&&(o(0,"span",6),r(1),a()),n&2){let e=f();l(),R(" ",e.formValidationUtils.getFieldError(e.form,"horaRealEntrada")," ")}}function Pe(n,t){if(n&1&&(o(0,"span",6),r(1),a()),n&2){let e=f();l(),R(" ",e.formValidationUtils.getFieldError(e.form,"horaRealSalida")," ")}}function $e(n,t){n&1&&(o(0,"div",21)(1,"span"),r(2,"Datos guardados"),a()())}var K=class n{jornada=U.required();jornadasService=m(w);fb=m(Se);form=this.fb.group({fecha:["",V.required],horaTeoricaEntrada:[null,V.required],horaTeoricaSalida:[null,V.required],horaRealEntrada:[null,V.required],horaRealSalida:[null,V.required],observaciones:[null]});wasSaved=S(!1);router=m(k);formValidationUtils=_e;ngOnInit(){this.setFormValue(this.jornada())}setFormValue(t){this.form.reset(t);let e=this.formatDate(t.fecha);this.form.patchValue({fecha:e})}submit(){return oe(this,null,function*(){if(!this.form.valid){this.form.markAllAsTouched();return}let e=D({},this.form.value);if(this.jornada())yield W(this.jornadasService.actualizar(this.jornada()));else{e.id="";let i=yield W(this.jornadasService.insertar(e));this.router.navigate(["home/dashboard"])}this.wasSaved.set(!0),setTimeout(()=>{this.wasSaved.set(!1)},3e3)})}formatDate(t){let e=t.getFullYear(),i=`${t.getMonth()+1}`.padStart(2,"0"),c=`${t.getDate()}`.padStart(2,"0");return`${e}-${i}-${c}`}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-jornada-form"]],inputs:{jornada:[1,"jornada"]},decls:44,vars:7,consts:[[1,"w-full","p-4",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","lg:grid-cols-6","gap-4","mb-4","w-full"],[1,"form-control","w-full"],["for","fecha",1,"label"],[1,"label-text"],["type","date","id","fecha","formControlName","fecha",1,"input","input-bordered","w-full"],[1,"text-xs","text-red-500"],["for","horaEntrada",1,"label"],["type","time","id","horaTeoricaEntrada","formControlName","horaTeoricaEntrada",1,"input","input-bordered","w-full"],["for","horaTeoricaSalida",1,"label"],["type","time","id","horaTeoricaSalida","formControlName","horaTeoricaSalida",1,"input","input-bordered","w-full"],["for","horaRealEntrada",1,"label"],["type","time","id","horaRealEntrada","formControlName","horaRealEntrada",1,"input","input-bordered","w-full"],["for","horaRealSalida",1,"label"],["type","time","id","horaRealSalida","formControlName","horaRealSalida",1,"input","input-bordered","w-full"],[1,"grid","grid-cols-1","lg:grid-cols-6","gap-4","items-end","w-full"],[1,"form-control","w-full","lg:col-span-5"],["for","observaciones",1,"label"],[1,"text-xs"],["id","observaciones","formControlName","observaciones","rows","2",1,"input","input-bordered","w-full"],["type","submit",1,"btn","btn-secondary","w-full","mt-4","lg:mt-0"],[1,"alert","alert-success","fixed","bottom-4","right-4","w80","animate-fadeIn"]],template:function(e,i){e&1&&(o(0,"form",0),g("ngSubmit",function(){return i.submit()}),o(1,"div",1)(2,"div",2)(3,"label",3)(4,"span",4),r(5,"Fecha"),a()(),s(6,"input",5),v(7,Ie,2,1,"span",6),a(),o(8,"div",2)(9,"label",7)(10,"span",4),r(11,"Hora entrada"),a()(),s(12,"input",8),v(13,Ve,2,1,"span",6),a(),o(14,"div",2)(15,"label",9)(16,"span",4),r(17,"Hora salida"),a()(),s(18,"input",10),v(19,Je,2,1,"span",6),a(),o(20,"div",2)(21,"label",11)(22,"span",4),r(23,"Hora entrada (real)"),a()(),s(24,"input",12),v(25,Ne,2,1,"span",6),a(),o(26,"div",2)(27,"label",13)(28,"span",4),r(29,"Hora salida (real)"),a()(),s(30,"input",14),v(31,Pe,2,1,"span",6),a()(),o(32,"div",15)(33,"div",16)(34,"label",17)(35,"span",4),r(36,"Observaciones "),o(37,"span",18),r(38," (Opcional)"),a()()(),s(39,"input",19),a(),o(40,"div",2)(41,"button",20),r(42,"Guardar"),a()()()(),v(43,$e,3,0,"div",21)),e&2&&(x("formGroup",i.form),l(7),b(i.formValidationUtils.isInvalidField(i.form,"fecha")?7:-1),l(6),b(i.formValidationUtils.isInvalidField(i.form,"horaTeoricaEntrada")?13:-1),l(6),b(i.formValidationUtils.isInvalidField(i.form,"horaTeoricaSalida")?19:-1),l(6),b(i.formValidationUtils.isInvalidField(i.form,"horaRealEntrada")?25:-1),l(6),b(i.formValidationUtils.isInvalidField(i.form,"horaRealSalida")?31:-1),l(12),b(i.wasSaved()?43:-1))},dependencies:[O,ge,be,he,ve,xe,Ce],encapsulation:2})};function Ue(n,t){n&1&&(o(0,"div",0),s(1,"div",2),a())}function Le(n,t){if(n&1&&s(0,"app-jornada-form",1),n&2){let e=f();x("jornada",e.jornadaResource.value())}}var Q=class n{activatedRoute=m(ue);router=m(k);jornadasService=m(w);jornadaId=ne(this.activatedRoute.params.pipe($(t=>t.id)));jornadaResource=J({request:()=>({id:this.jornadaId()}),loader:({request:t})=>this.jornadasService.getPorId(t.id)});redirectEffect=te(()=>{this.jornadaResource.error()&&this.router.navigate(["/home/dashboard"])});static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-jornada-page"]],decls:2,vars:2,consts:[[1,"flex","justify-center","items-center","h-screen"],[3,"jornada"],[1,"loading","loading-spinner","loading-lg"]],template:function(e,i){e&1&&v(0,Ue,2,0,"div",0)(1,Le,1,1,"app-jornada-form",1),e&2&&(b(i.jornadaResource.isLoading()?0:-1),l(),b(i.jornadaResource.hasValue()?1:-1))},dependencies:[O,K],encapsulation:2})};var qe=[{path:"",component:B,children:[{path:"dashboard",component:Y},{path:":id",component:Q},{path:"**",redirectTo:"dashboard"}]}],en=qe;export{qe as authRoutes,en as default};
